(function(){app.controller("DepositHistoryController",function($scope,$stateParams,$http){var ctrl;return ctrl=this,$scope.predicate="-id",this.currency=$stateParams.currency,this.account=Account.findBy("currency",this.currency),this.deposits=this.account.deposits().slice(0,3),this.newRecord=function(deposit){return"submitting"===deposit.aasm_state?!0:!1},this.noDeposit=function(){return 0===this.deposits.length},this.refresh=function(){return this.deposits=this.account.deposits().slice(0,3),$scope.$apply()},this.cancelDeposit=function(deposit){var deposit_channel;return deposit_channel=DepositChannel.findBy("currency",deposit.currency),$http["delete"]("/deposits/"+deposit_channel.resource_name+"/"+deposit.id).error(function(responseText){return $.publish("flash",{message:responseText})})},this.canCancel=function(state){return["submitting"].indexOf(state)>-1},(this.event=function(){return Deposit.bind("create update destroy",function(){return ctrl.refresh()})})()})}).call(this);