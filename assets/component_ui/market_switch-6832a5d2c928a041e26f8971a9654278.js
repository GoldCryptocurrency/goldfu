(function(){window.MarketSwitchUI=flight.component(function(){return this.attributes({table:"tbody",marketGroupName:".panel-body-head thead span.name",marketGroupItem:".dropdown-wrapper .dropdown-menu li a",marketsTable:".table.markets"}),this.switchMarketGroup=function(event,item){var name;return item=$(event.target).closest("a"),name=item.data("name"),this.select("marketGroupItem").removeClass("active"),item.addClass("active"),this.select("marketGroupName").text(item.find("span").text()),this.select("marketsTable").attr("class","table table-hover markets "+name)},this.updateMarket=function(select,ticker){var p1,p2,trend;return trend=formatter.trend(ticker.last_trend),select.find("td.price").attr("title",ticker.last).html("<span class='"+trend+"'>"+formatter.ticker_price(ticker.last)+"</span>"),p1=parseFloat(ticker.open),p2=parseFloat(ticker.last),trend=formatter.trend(p2>=p1),select.find("td.change").html("<span class='"+trend+"'>"+formatter.price_change(p1,p2)+"%</span>")},this.refresh=function(event,data){var table,ticker,_i,_len,_ref;for(table=this.select("table"),_ref=data.tickers,_i=0,_len=_ref.length;_len>_i;_i++)ticker=_ref[_i],this.updateMarket(table.find("tr#market-list-"+ticker.market),ticker.data);return table.find("tr#market-list-"+gon.market.id).addClass("highlight")},this.after("initialize",function(){return this.on(document,"market::tickers",this.refresh),this.on(this.select("marketGroupItem"),"click",this.switchMarketGroup),this.select("table").on("click","tr",function(e){return"I"!==e.target.nodeName?window.location.href=window.formatter.market_url($(this).data("market")):void 0}),this.hide_accounts=$("tr.hide"),$(".view_all_accounts").on("click",function(_this){return function(e){var $el;return $el=$(e.currentTarget),_this.hide_accounts.hasClass("hide")?($el.text($el.data("hide-text")),_this.hide_accounts.removeClass("hide")):($el.text($el.data("show-text")),_this.hide_accounts.addClass("hide"))}}(this))})})}).call(this);