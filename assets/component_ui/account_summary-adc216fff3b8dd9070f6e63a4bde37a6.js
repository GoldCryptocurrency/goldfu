(function(){this.AccountSummaryUI=flight.component(function(){return this.attributes({total_assets:"#total_assets"}),this.updateAccount=function(event,data){var account,amount,currency,_results;_results=[];for(currency in data)account=data[currency],amount=new BigNumber(account.locked).plus(new BigNumber(account.balance)),this.$node.find("tr."+currency+" span.amount").text(formatter.round(amount,2)),_results.push(this.$node.find("tr."+currency+" span.locked").text(formatter.round(account.locked,2)));return _results},this.updateTotalAssets=function(){var account,currency,fiatCurrency,sum,symbol,ticker,_ref;fiatCurrency=gon.fiat_currency,symbol=gon.currencies[fiatCurrency].symbol,sum=0,_ref=this.accounts;for(currency in _ref)account=_ref[currency],currency===fiatCurrency?(sum+=+account.balance,sum+=+account.locked):(ticker=this.tickers[""+currency+fiatCurrency])&&(sum+=+account.balance*+ticker.last,sum+=+account.locked*+ticker.last);return this.select("total_assets").text(""+symbol+formatter.round(sum,2))},this.after("initialize",function(){return this.accounts=gon.accounts,this.tickers=gon.tickers,this.on(document,"account::update",this.updateAccount),this.on(document,"account::update",function(_this){return function(event,data){return _this.accounts=data,_this.updateTotalAssets()}}(this)),this.on(document,"market::tickers",function(_this){return function(event,data){return _this.tickers=data.raw,_this.updateTotalAssets()}}(this))})})}).call(this);