(function(){this.TwoFactorAuth=flight.component(function(){return this.attributes({switchName:"span.switch-name",switchItem:".dropdown-menu a",switchItemApp:'.dropdown-menu a[data-type="app"]',switchItemSms:'.dropdown-menu a[data-type="sms"]',sendCodeButtonContainer:".send-code-button",sendCodeButton:"button[value=send_code]",authType:".two_factor_auth_type",appHint:"span.hint.app",smsHint:"span.hint.sms",chapterWrap:".captcha-wrap"}),this.setActiveItem=function(event){switch($(event.target).data("type")){case"app":return this.switchToApp();case"sms":return this.switchToSms()}},this.switchToApp=function(){return this.select("switchName").text(this.select("switchItemApp").text()),this.select("sendCodeButtonContainer").addClass("hide"),this.select("authType").val("app"),this.select("smsHint").addClass("hide"),this.select("appHint").removeClass("hide")},this.switchToSms=function(){return this.select("switchName").text(this.select("switchItemSms").text()),this.select("sendCodeButtonContainer").removeClass("hide"),this.select("authType").val("sms"),this.select("smsHint").removeClass("hide"),this.select("appHint").addClass("hide")},this.countDownSendCodeButton=function(){var altName,countDown,countDownTimer,origName;return origName=this.select("sendCodeButton").data("orig-name"),altName=this.select("sendCodeButton").data("alt-name"),countDown=30,this.select("sendCodeButton").attr("disabled","disabled").addClass("disabled"),(countDownTimer=function(_this){return function(){return setTimeout(function(){return 0!==countDown?(countDown--,_this.select("sendCodeButton").text(altName.replace("COUNT",countDown)),countDownTimer()):_this.select("sendCodeButton").removeAttr("disabled").removeClass("disabled").text(origName)},1e3)}}(this))()},this.sendCode=function(event){return event.preventDefault(),this.countDownSendCodeButton(),$.get("/two_factors/sms?refresh=true")},this.checkCaptchaRequired=function(){return this.select("chapterWrap").load("/two_factors/app",function(html){return $(this).html(html)})},this.after("initialize",function(){return this.checkCaptchaRequired(),$.subscribe("withdraw:form:submitted",function(_this){return function(){return _this.checkCaptchaRequired()}}(this)),this.on(this.select("switchItem"),"click",this.setActiveItem),this.on(this.select("sendCodeButton"),"click",this.sendCode)})})}).call(this);